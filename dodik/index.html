<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Wedding of Ladynah & Dodik</title>
    
    <!-- Open Graph Meta Tags untuk WhatsApp Preview -->
    <meta property="og:title" content="The Wedding of Ladynah & Dodik" />
    <meta property="og:description" content="Selasa, 17 Juni 2025 - Akad Nikah | Kamis, 19 Juni 2025 - Resepsi. Dengan penuh kebahagiaan, kami mengundang Anda untuk hadir dalam acara pernikahan kami." />
    <meta property="og:image" content="https://www.gasnikah.com/wp-content/uploads/2025/05/THUMBNAIL-99.jpg" />
    <meta property="og:image:secure_url" content="https://www.gasnikah.com/wp-content/uploads/2025/05/THUMBNAIL-99.jpg" />
    <meta property="og:image:type" content="image/jpeg" />
    <meta property="og:image:width" content="768" />
    <meta property="og:image:height" content="1156" />
    <meta property="og:image:alt" content="Undangan Pernikahan Ladynah & Dodik" />
    <meta property="og:url" content="" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="The Wedding of Ladynah & Dodik" />
    <meta property="og:locale" content="id_ID" />
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="The Wedding of Ladynah & Dodik" />
    <meta name="twitter:description" content="Selasa, 17 Juni 2025 - Akad Nikah | Kamis, 19 Juni 2025 - Resepsi. Dengan penuh kebahagiaan, kami mengundang Anda untuk hadir dalam acara pernikahan kami." />
    <meta name="twitter:image" content="https://www.gasnikah.com/wp-content/uploads/2025/05/THUMBNAIL-99.jpg" />
    <meta name="twitter:image:alt" content="Undangan Pernikahan Ladynah & Dodik" />
    
    <!-- WhatsApp specific meta tags -->
    <meta property="whatsapp:title" content="The Wedding of Ladynah & Dodik" />
    <meta property="whatsapp:image" content="https://www.gasnikah.com/wp-content/uploads/2025/05/THUMBNAIL-99.jpg" />
    
    <!-- Fallback untuk Android WhatsApp -->
    <meta name="description" content="Selasa, 17 Juni 2025 - Akad Nikah | Kamis, 19 Juni 2025 - Resepsi. Dengan penuh kebahagiaan, kami mengundang Anda untuk hadir dalam acara pernikahan kami." />
    <meta name="image" content="https://www.nikah.com/wp-content/uploads/2025/05/THUMBNAIL-99.jpg" />
    
    <!-- Preload gambar untuk performa lebih baik -->
    <link rel="preload" as="image" href="https://www.nikah.com/wp-content/uploads/2025/05/THUMBNAIL-99.jpg" />
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html, body {
            height: 100%;
            overflow: hidden;
        }
        
        iframe {
            width: 100%;
            height: 100vh;
            border: none;
            display: block;
        }
    </style>
</head>
<body>
    <!-- Main iframe -->
    <iframe id="undanganFrame"></iframe>
    
    <script>
        // Ambil parameter ?to= dari URL repal.com
        function getUrlParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }
        
        // Update meta tags berdasarkan nama tamu
        function updateMetaTags(guestName) {
            if (guestName) {
                // Update title
                document.title = `The Wedding of Ladynah & Dodik - Undangan untuk ${guestName}`;
                
                // Update Open Graph title
                const ogTitle = document.querySelector('meta[property="og:title"]');
                if (ogTitle) {
                    ogTitle.content = `The Wedding of Ladynah & Dodik - Undangan untuk ${guestName}`;
                }
                
                // Update description dengan nama tamu dan detail acara
                const ogDescription = document.querySelector('meta[property="og:description"]');
                if (ogDescription) {
                    ogDescription.content = `${guestName}, dengan penuh kebahagiaan kami mengundang Anda: Akad Nikah (Selasa, 17 Juni 2025) & Resepsi (Kamis, 19 Juni 2025) `;
                }
                
                // Update URL
                const ogUrl = document.querySelector('meta[property="og:url"]');
                if (ogUrl) {
                    ogUrl.content = window.location.href;
                }
                
                // Update Twitter meta
                const twitterTitle = document.querySelector('meta[name="twitter:title"]');
                if (twitterTitle) {
                    twitterTitle.content = `The Wedding of Ladynah & Dodik - Undangan untuk ${guestName}`;
                }
                
                const twitterDescription = document.querySelector('meta[name="twitter:description"]');
                if (twitterDescription) {
                    twitterDescription.content = `${guestName}, dengan penuh kebahagiaan kami mengundang Anda: Akad Nikah (Selasa, 17 Juni 2025) & Resepsi (Kamis, 19 Juni 2025) `;
                }
                
                // Update WhatsApp meta
                const whatsappTitle = document.querySelector('meta[property="whatsapp:title"]');
                if (whatsappTitle) {
                    whatsappTitle.content = `The Wedding of Ladynah & Dodik - Undangan untuk ${guestName}`;
                }
            } else {
                // Set URL untuk meta tags
                const ogUrl = document.querySelector('meta[property="og:url"]');
                if (ogUrl) {
                    ogUrl.content = window.location.href;
                }
            }
        }
        
        // Ambil nama tamu dari parameter
        const guestName = getUrlParameter('to');
        const iframe = document.getElementById('undanganFrame');
        
        // Update meta tags
        updateMetaTags(guestName);
        
        // URL nikah.com
        let gasnikahUrl = 'https://ladynahdodik.my.id/dodik/preview.html';
        
        // Kalau ada parameter ?to=, tambahin ke URL gasnikah
        if (guestName) {
            gasnikahUrl += '?to=' + encodeURIComponent(guestName);
        }
        
        // Set iframe ke gasnikah.com dengan parameter
        iframe.src = gasnikahUrl;
        
        // Fungsi untuk generate WhatsApp share link
        function generateWhatsAppLink() {
            const currentUrl = window.location.href;
            const message = guestName 
                ? `The Wedding of Ladynah & Dodik - Undangan untuk ${guestName}\n\nAkad Nikah: Selasa, 17 Juni 2025\n$\nResepsi: Kamis, 19 Juni 2025\n\n${currentUrl}`
                : `The Wedding of Ladynah & Dodik\n\nAkad Nikah: Selasa, 17 Juni 2025\n$\nResepsi: kamis, 19 Juni 2025\n\n${currentUrl}`;
            
            return `https://wa.me/?text=${encodeURIComponent(message)}`;
        }
        
        // Event listener untuk keyboard shortcut share (Ctrl+S atau Cmd+S)
        document.addEventListener('keydown', function(e) {
            if ((e.ctrlKey || e.metaKey) && e.key === 's') {
                e.preventDefault();
                window.open(generateWhatsAppLink(), '_blank');
            }
        });
        
        // Fungsi untuk copy link
        function copyInvitationLink() {
            navigator.clipboard.writeText(window.location.href).then(() => {
                alert('Link undangan telah disalin!');
            }).catch(() => {
                // Fallback untuk browser lama
                const textArea = document.createElement('textarea');
                textArea.value = window.location.href;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert('Link undangan telah disalin!');
            });
        }
        
        // Expose functions ke global scope untuk debugging
        window.shareToWhatsApp = generateWhatsAppLink;
        window.copyLink = copyInvitationLink;
    </script>
</body>
</html>
